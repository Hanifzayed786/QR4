<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simon - Grid Memory</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700;900&display=swap');

:root {
  --bg-dark: #121212;
  --container-bg: #212121;
  --pad-green: #4CAF50;
  --pad-red: #F44336;
  --pad-yellow: #FFEB3B;
  --pad-blue: #2196F3;
  --text-light: #E0E0E0;
  --accent-color: #03A9F4;
  --border-radius: 8px;
  --win-color: #FFC107;
}

body {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  background: var(--bg-dark);
  font-family: 'Roboto Mono', monospace;
  color: var(--text-light);
  margin: 0;
  overflow: hidden;
  padding: 10px;
  box-sizing: border-box;
}

.game {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  background: var(--container-bg);
  border-radius: 12px;
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5),
              0 0 0 2px var(--accent-color) inset;
  border: 1px solid #333;
  padding: 20px;
  width: 90vw;
  max-width: 500px;
  transition: all 0.3s ease;
}

h1 {
  font-size: clamp(1.4em, 4vw, 2em);
  margin-bottom: 20px;
  color: var(--accent-color);
  text-shadow: 0 0 10px rgba(3, 169, 244, 0.5);
  letter-spacing: 2px;
  text-transform: uppercase;
}

/* Rules panel */
.rules-panel {
  background: #2b2b2b;
  padding: 10px 15px;
  border-radius: var(--border-radius);
  margin-bottom: 20px;
  text-align: left;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  border-left: 5px solid var(--pad-green);
  width: 100%;
}

.rules-panel h2 {
  font-size: clamp(0.9em, 2.5vw, 1em);
  color: var(--pad-green);
  margin-top: 0;
  text-transform: uppercase;
}

.rules-panel ul {
  list-style: none;
  padding: 0;
  margin: 5px 0 0 0;
  font-size: clamp(0.7em, 2.5vw, 0.9em);
}

.rules-panel li {
  margin-bottom: 3px;
  position: relative;
  padding-left: 15px;
}

.rules-panel li::before {
  content: '>';
  position: absolute;
  left: 0;
  color: var(--accent-color);
  font-weight: 700;
}

/* Board */
.board {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap: 10px;
  position: relative;
  width: min(80vw, 360px);
  height: min(80vw, 360px);
  background: #2b2b2b;
  border-radius: 50%;
  padding: 8px;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.4) inset;
}

.display-console {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 35%;
  height: 35%;
  background: #000;
  border-radius: 50%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 6;
  border: 6px solid var(--container-bg);
  box-shadow: 0 0 15px rgba(0, 0, 0, 0.8) inset;
}

#level {
  font-size: clamp(1.5em, 6vw, 2.5em);
  font-weight: 900;
  color: var(--text-light);
  margin: 0;
}

#status {
  font-size: clamp(0.6em, 2.5vw, 0.8em);
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--accent-color);
  min-height: 15px;
  margin-bottom: 5px;
}

.pad {
  border-radius: var(--border-radius);
  cursor: pointer;
  border: 2px solid rgba(255, 255, 255, 0.1);
  opacity: 0.7;
  transition: all 0.15s ease;
}

.green { background: var(--pad-green); }
.red { background: var(--pad-red); }
.yellow { background: var(--pad-yellow); }
.blue { background: var(--pad-blue); }

.pad:hover { transform: scale(1.05); }
.pad.active { opacity: 1; filter: brightness(1.2); }
.green.active { box-shadow: 0 0 20px var(--pad-green); }
.red.active { box-shadow: 0 0 20px var(--pad-red); }
.yellow.active { box-shadow: 0 0 20px var(--pad-yellow); }
.blue.active { box-shadow: 0 0 20px var(--pad-blue); }

/* Victory screen */
.victory-screen {
  position: absolute;
  inset: 0;
  background: rgba(18, 18, 18, 0.95);
  border-radius: 12px;
  z-index: 20;
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: var(--win-color);
  text-shadow: 0 0 15px var(--win-color);
  animation: fadeIn 0.8s forwards;
}
.victory-screen h2 {
  font-size: clamp(1.8em, 5vw, 3em);
  margin-bottom: 10px;
  animation: pulse 1.5s infinite alternate;
}
.victory-screen p {
  font-size: clamp(1em, 3vw, 1.2em);
  color: var(--text-light);
  text-shadow: none;
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes pulse { from { transform: scale(1); } to { transform: scale(1.05); } }

.flash-overlay {
  position: absolute; inset: 0;
  background: rgba(255, 0, 0, 0.8);
  border-radius: 50%;
  display: none;
  opacity: 0;
  transition: opacity 0.1s;
}
.flash-overlay.active { display: block; opacity: 1; }

.shake { animation: shake 0.5s; }
@keyframes shake {
  0%,100% { transform: translate(0,0); }
  25% { transform: translate(-10px,-5px); }
  50% { transform: translate(10px,5px); }
  75% { transform: translate(-10px,-5px); }
}

/* Mobile adjustments */
@media (max-width: 480px) {
  .rules-panel { padding: 8px 10px; }
  .game { padding: 15px; }
  .board { width: 85vw; height: 85vw; }
}
</style>
</head>
<body>
<div class="game">
  <h1>[ SIMON // CORE ]</h1>

  <div class="rules-panel">
    <h2>System Protocol</h2>
    <ul>
      <li>Watch the sequence shown by the system.</li>
      <li>Repeat the full sequence by clicking pads.</li>
      <li>The sequence grows longer and faster each level.</li>
      <li>Complete Level 10 to archieve next challenge.</li>
    </ul>
  </div>

  <div class="board" id="board">
    <div class="pad green" data-color="green"></div>
    <div class="pad red" data-color="red"></div>
    <div class="pad yellow" data-color="yellow"></div>
    <div class="pad blue" data-color="blue"></div>
    <div class="flash-overlay" id="flash"></div>
    <div class="display-console">
      <p id="status">INIT</p>
      <p id="level">0</p>
    </div>
  </div>

  <div class="victory-screen" id="victoryScreen">
    <h2>SYSTEM VICTORY!</h2>
    <p>CONGRATULATIONS. YOU'VE CRACKED THE CODE.</p>
  </div>
</div>

<script>
const pads = document.querySelectorAll('.pad');
const statusEl = document.getElementById('status');
const levelEl = document.getElementById('level');
const flashOverlay = document.getElementById('flash');
const boardEl = document.getElementById('board');
const victoryScreen = document.getElementById('victoryScreen');
const WIN_LEVEL = 10;

let sequence = [], playerSequence = [], level = 0, acceptingInput = false, gameStarted = false;

function checkWinCondition() {
  if (level === WIN_LEVEL) { gameOver(true); return true; }
  return false;
}

function nextLevel() {
  if (checkWinCondition()) return;
  level++;
  levelEl.textContent = level;
  playerSequence = [];
  statusEl.textContent = 'SEQUENCE PLAY';

  const baseInterval = 750;
  const speedFactor = Math.floor(level / 4) * 75;
  const playInterval = Math.max(300, baseInterval - speedFactor);
  const colors = ['green','red','yellow','blue'];
  sequence.push(colors[Math.floor(Math.random()*4)]);
  playSequence(playInterval);
}

function playSequence(interval) {
  acceptingInput = false;
  let i = 0;
  const playTime = interval * 0.4;
  const intervalId = setInterval(() => {
    activatePad(sequence[i], playTime);
    i++;
    if (i >= sequence.length) {
      clearInterval(intervalId);
      setTimeout(()=>{ acceptingInput = true; statusEl.textContent = 'INPUT REQUIRED'; }, 200);
    }
  }, interval);
}

function activatePad(color, duration=100) {
  const pad = document.querySelector(`.pad.${color}`);
  pad.classList.add('active');
  setTimeout(()=>pad.classList.remove('active'), duration);
}

function checkInput(color) {
  if (!acceptingInput) return;
  playerSequence.push(color);
  activatePad(color);
  const index = playerSequence.length - 1;
  if (playerSequence[index] !== sequence[index]) { gameOver(false); return; }
  if (playerSequence.length === sequence.length) {
    acceptingInput = false;
    statusEl.textContent = 'CORRECT // WAIT';
    setTimeout(nextLevel, 1200);
  }
}

function gameOver(isVictory) {
  acceptingInput = false;
  gameStarted = false;
  if (isVictory) {
    statusEl.textContent = 'WIN CONDITION MET';
    victoryScreen.style.display = 'flex';
    setTimeout(()=>{ window.location.href = 'quiz4.html'; }, 3000);
    return;
  }
  flashOverlay.classList.add('active');
  boardEl.classList.add('shake');
  statusEl.textContent = 'ERROR // FAIL';
  levelEl.textContent = `L${level}`;
  setTimeout(()=>{
    flashOverlay.classList.remove('active');
    boardEl.classList.remove('shake');
    sequence = []; playerSequence = []; level = 0;
    levelEl.textContent = `0`; statusEl.textContent = 'PRESS TO START';
  }, 1200);
}

pads.forEach(pad=>{
  pad.addEventListener('click', ()=>{
    if (!gameStarted) {
      gameStarted = true; statusEl.textContent = 'LOADING...';
      setTimeout(nextLevel, 500);
    } else checkInput(pad.dataset.color);
  });
});

window.onload = ()=>{ statusEl.textContent = 'PRESS TO START'; };
</script>
</body>
</html>
